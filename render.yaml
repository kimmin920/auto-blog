services:
  - type: web
    name: blog-auto
    runtime: node
    buildCommand: npm ci
    startCommand: npm start
    healthCheckPath: /
    envVars:
      - key: NODE_VERSION
        value: "20"
      - key: HOST
        value: "0.0.0.0"
      - key: LLM_PROVIDER
        value: "openai"
      - key: OPENAI_MODEL
        value: "gpt-5.2"
      - key: OPENAI_VISION_MODEL
        value: "gpt-4o-mini"
      - key: DB_PATH
        value: "/var/data/blog-auto.sqlite"
      - key: UPLOAD_DIR
        value: "/var/data/uploads"
      - key: OPENAI_API_KEY
        sync: false
      - key: THREADS_APP_ID
        sync: false
      - key: THREADS_APP_SECRET
        sync: false
      - key: THREADS_REDIRECT_URI
        sync: false
      - key: THREADS_SCOPE
        value: "threads_basic"
      - key: THREADS_API_BASE
        value: "https://graph.threads.net/v1.0"
      - key: CLOUDFLARE_API_TOKEN
        sync: false
      - key: CLOUDFLARE_ACCOUNT_ID
        sync: false
      - key: CLOUDFLARE_MODEL
        value: "@cf/meta/llama-3.1-8b-instruct"
      - key: CLOUDFLARE_VISION_MODEL
        value: "@cf/meta/llama-3.2-11b-vision-instruct"
    disk:
      name: app-data
      mountPath: /var/data
      sizeGB: 5
